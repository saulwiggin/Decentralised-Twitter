{"ast":null,"code":"import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { providerFromEngine, createFetchMiddleware } from '@toruslabs/base-controllers';\nimport { mergeMiddleware, createAsyncMiddleware, JRPCEngine } from '@toruslabs/openlogin-jrpc';\nimport { CHAIN_NAMESPACES, isHexStrict, WalletInitializationError } from '@web3auth/base';\nimport { BaseProvider } from '@web3auth/base-provider';\nimport { Transaction, Keypair, Message } from '@solana/web3.js';\nimport bs58 from 'bs58';\nimport { ethErrors } from 'eth-rpc-errors';\nimport nacl from '@toruslabs/tweetnacl-js';\n\nfunction createGetAccountsMiddleware(_ref) {\n  let {\n    getAccounts\n  } = _ref;\n  return createAsyncMiddleware(async (request, response, next) => {\n    const {\n      method\n    } = request;\n    if (method !== \"getAccounts\") return next();\n    if (!getAccounts) throw new Error(\"WalletMiddleware - opts.getAccounts not provided\"); // This calls from the prefs controller\n\n    const accounts = await getAccounts(request);\n    response.result = accounts;\n    return undefined;\n  });\n}\n\nfunction createRequestAccountsMiddleware(_ref2) {\n  let {\n    requestAccounts\n  } = _ref2;\n  return createAsyncMiddleware(async (request, response, next) => {\n    const {\n      method\n    } = request;\n    if (method !== \"requestAccounts\") return next();\n    if (!requestAccounts) throw new Error(\"WalletMiddleware - opts.requestAccounts not provided\"); // This calls the UI login function\n\n    const accounts = await requestAccounts(request);\n    response.result = accounts;\n    return undefined;\n  });\n}\n\nfunction createGenericJRPCMiddleware(targetMethod, handler) {\n  return createAsyncMiddleware(async (request, response, next) => {\n    const {\n      method\n    } = request;\n    if (method !== targetMethod) return next();\n    if (!handler) throw new Error(\"WalletMiddleware - \".concat(targetMethod, \" not provided\"));\n    const result = await handler(request);\n    response.result = result;\n    return undefined;\n  });\n}\n\nfunction createSolanaMiddleware(providerHandlers) {\n  const {\n    getAccounts,\n    requestAccounts,\n    signTransaction,\n    signAndSendTransaction,\n    signAllTransactions,\n    signMessage,\n    getPrivateKey\n  } = providerHandlers;\n  return mergeMiddleware([createRequestAccountsMiddleware({\n    requestAccounts\n  }), createGetAccountsMiddleware({\n    getAccounts\n  }), createGenericJRPCMiddleware(\"signTransaction\", signTransaction), createGenericJRPCMiddleware(\"signAndSendTransaction\", signAndSendTransaction), createGenericJRPCMiddleware(\"signAllTransactions\", signAllTransactions), createGenericJRPCMiddleware(\"signMessage\", signMessage), createGenericJRPCMiddleware(\"solanaPrivateKey\", getPrivateKey)]);\n}\n\nfunction createChainSwitchMiddleware(_ref3) {\n  let {\n    addNewChainConfig,\n    switchSolanaChain\n  } = _ref3;\n  return mergeMiddleware([createGenericJRPCMiddleware(\"addSolanaChain\", addNewChainConfig), createGenericJRPCMiddleware(\"switchSolanaChain\", switchSolanaChain)]);\n}\n\nfunction createAccountMiddleware(_ref4) {\n  let {\n    updatePrivatekey\n  } = _ref4;\n  return mergeMiddleware([createGenericJRPCMiddleware(\"updateAccount\", updatePrivatekey)]);\n}\n\nfunction ownKeys$3(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$3(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys$3(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$3(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction createInjectedProviderProxyMiddleware(provider) {\n  return createAsyncMiddleware(async (req, res, _next) => {\n    const result = await provider.request(_objectSpread$3({}, req));\n    res.result = result;\n  });\n}\n\nconst getPhantomHandlers = injectedProvider => {\n  const providerHandlers = {\n    requestAccounts: async () => {\n      return injectedProvider.publicKey ? [bs58.encode(injectedProvider.publicKey.toBytes())] : [];\n    },\n    getAccounts: async () => injectedProvider.publicKey ? [bs58.encode(injectedProvider.publicKey.toBytes())] : [],\n    getPrivateKey: async () => {\n      throw ethErrors.rpc.methodNotSupported();\n    },\n    signTransaction: async req => {\n      const message = bs58.decode(req.params.message);\n      const txn = Transaction.from(message);\n      const transaction = await injectedProvider.signTransaction(txn);\n      return transaction;\n    },\n    signMessage: async req => {\n      var _req$params;\n\n      const message = await injectedProvider.request({\n        method: \"signMessage\",\n        params: {\n          message: (_req$params = req.params) === null || _req$params === void 0 ? void 0 : _req$params.message\n        }\n      });\n      return message;\n    },\n    signAndSendTransaction: async req => {\n      const message = bs58.decode(req.params.message);\n      const txn = Transaction.from(message);\n      const txRes = await injectedProvider.signAndSendTransaction(txn);\n      return {\n        signature: txRes.signature\n      };\n    },\n    signAllTransactions: async req => {\n      var _req$params2, _req$params3;\n\n      if (!((_req$params2 = req.params) !== null && _req$params2 !== void 0 && _req$params2.message) || !((_req$params3 = req.params) !== null && _req$params3 !== void 0 && _req$params3.message.length)) {\n        throw ethErrors.rpc.invalidParams(\"message\");\n      }\n\n      const txns = req.params.message.map(msg => {\n        const decodedMsg = bs58.decode(msg);\n        return Transaction.from(decodedMsg);\n      });\n      const transaction = await injectedProvider.signAllTransactions(txns);\n      return transaction;\n    }\n  };\n  return providerHandlers;\n};\n\nfunction ownKeys$2(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys$2(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$2(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nclass PhantomInjectedProvider extends BaseProvider {\n  constructor(_ref) {\n    let {\n      config,\n      state\n    } = _ref;\n    super({\n      config: {\n        chainConfig: _objectSpread$2(_objectSpread$2({}, config.chainConfig), {}, {\n          chainNamespace: CHAIN_NAMESPACES.SOLANA\n        })\n      },\n      state\n    });\n  }\n\n  async switchChain(_) {\n    return Promise.resolve();\n  }\n\n  async setupProvider(injectedProvider) {\n    const providerHandlers = getPhantomHandlers(injectedProvider);\n    const solanaMiddleware = createSolanaMiddleware(providerHandlers);\n    const injectedProviderProxy = createInjectedProviderProxyMiddleware(injectedProvider);\n    const engine = new JRPCEngine();\n    engine.push(solanaMiddleware);\n    engine.push(injectedProviderProxy);\n    const provider = providerFromEngine(engine);\n    this.updateProviderEngineProxy(provider);\n    await this.lookupNetwork(injectedProvider);\n  }\n\n  async lookupNetwork(_) {\n    const {\n      chainConfig\n    } = this.config;\n    this.update({\n      chainId: chainConfig.chainId\n    });\n    return chainConfig.chainId || \"\"; // const genesisHash = await phantomProvider.request<string>({\n    //   method: \"getGenesisHash\",\n    //   params: [],\n    // });\n    // const { chainConfig } = this.config;\n    // if (!genesisHash) throw WalletInitializationError.rpcConnectionError(`Failed to connect with phantom wallet`);\n    // if (chainConfig.chainId !== genesisHash.substring(0, 32))\n    //   throw WalletInitializationError.invalidNetwork(\n    //     `Wallet is connected to wrong network,Please change your network to ${\n    //       SOLANA_NETWORKS[chainConfig.chainId] || chainConfig.displayName\n    //     } from phantom wallet extention.`\n    //   );\n    // return genesisHash.substring(0, 32);\n  }\n\n}\n\nconst getTorusHandlers = injectedProvider => {\n  const providerHandlers = {\n    requestAccounts: async () => {\n      const accounts = await injectedProvider.request({\n        method: \"solana_requestAccounts\",\n        params: {}\n      });\n      return accounts;\n    },\n    getAccounts: async () => {\n      const accounts = await injectedProvider.request({\n        method: \"solana_accounts\",\n        params: {}\n      });\n      return accounts;\n    },\n    getPrivateKey: async () => {\n      throw ethErrors.rpc.methodNotSupported();\n    },\n    signMessage: async req => {\n      var _req$params;\n\n      const message = await injectedProvider.request({\n        method: \"sign_message\",\n        params: {\n          data: (_req$params = req.params) === null || _req$params === void 0 ? void 0 : _req$params.message\n        }\n      });\n      return message;\n    },\n    signTransaction: async req => {\n      var _req$params2;\n\n      if (!((_req$params2 = req.params) !== null && _req$params2 !== void 0 && _req$params2.message)) {\n        throw ethErrors.rpc.invalidParams(\"message\");\n      }\n\n      const message = bs58.decode(req.params.message).toString(\"hex\");\n      const response = await injectedProvider.request({\n        method: \"sign_transaction\",\n        params: {\n          message\n        }\n      });\n      const buf = Buffer.from(response, \"hex\");\n      const sendTx = Transaction.from(buf);\n      return sendTx;\n    },\n    signAndSendTransaction: async req => {\n      var _req$params3;\n\n      if (!((_req$params3 = req.params) !== null && _req$params3 !== void 0 && _req$params3.message)) {\n        throw ethErrors.rpc.invalidParams(\"message\");\n      }\n\n      const message = bs58.decode(req.params.message).toString(\"hex\");\n      const response = await injectedProvider.request({\n        method: \"send_transaction\",\n        params: {\n          message\n        }\n      });\n      return {\n        signature: response\n      };\n    },\n    signAllTransactions: async req => {\n      var _req$params4, _req$params5;\n\n      if (!((_req$params4 = req.params) !== null && _req$params4 !== void 0 && _req$params4.message) || !((_req$params5 = req.params) !== null && _req$params5 !== void 0 && _req$params5.message.length)) {\n        throw ethErrors.rpc.invalidParams(\"message\");\n      }\n\n      const messages = [];\n\n      for (const transaction of req.params.message) {\n        const message = bs58.decode(transaction).toString(\"hex\");\n        messages.push(message);\n      }\n\n      const response = await injectedProvider.request({\n        method: \"sign_all_transactions\",\n        params: {\n          message: messages\n        }\n      });\n      return response;\n    }\n  };\n  return providerHandlers;\n};\n\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nclass TorusInjectedProvider extends BaseProvider {\n  constructor(_ref) {\n    let {\n      config,\n      state\n    } = _ref;\n    super({\n      config: {\n        chainConfig: _objectSpread$1(_objectSpread$1({}, config.chainConfig), {}, {\n          chainNamespace: CHAIN_NAMESPACES.SOLANA\n        })\n      },\n      state\n    });\n  }\n\n  async switchChain(_) {\n    return Promise.resolve();\n  }\n\n  async setupProvider(injectedProvider) {\n    this.handleInjectedProviderUpdate(injectedProvider);\n    await this.setupEngine(injectedProvider);\n  }\n\n  async lookupNetwork() {\n    if (!this.provider) throw ethErrors.provider.custom({\n      message: \"Torus solana provider is not initialized\",\n      code: 4902\n    });\n    const {\n      chainId\n    } = this.config.chainConfig;\n    const connectedChainId = await this.provider.request({\n      method: \"solana_chainId\"\n    });\n    const connectedHexChainId = isHexStrict(connectedChainId.toString()) ? connectedChainId : \"0x\".concat(parseInt(connectedChainId, 10).toString(16));\n    if (chainId !== connectedHexChainId) throw WalletInitializationError.rpcConnectionError(\"Invalid network, net_version is: \".concat(connectedHexChainId, \", expected: \").concat(chainId));\n    this.update({\n      chainId: connectedHexChainId\n    });\n    this.provider.emit(\"connect\", {\n      chainId: this.state.chainId\n    });\n    this.provider.emit(\"chainChanged\", this.state.chainId);\n    return this.state.chainId;\n  }\n\n  async setupEngine(injectedProvider) {\n    const providerHandlers = getTorusHandlers(injectedProvider);\n    const solanaMiddleware = createSolanaMiddleware(providerHandlers);\n    const injectedProviderProxy = createInjectedProviderProxyMiddleware(injectedProvider);\n    const engine = new JRPCEngine();\n    engine.push(solanaMiddleware);\n    engine.push(injectedProviderProxy);\n    const provider = providerFromEngine(engine);\n    this.updateProviderEngineProxy(provider);\n    await this.lookupNetwork();\n  }\n\n  async handleInjectedProviderUpdate(injectedProvider) {\n    injectedProvider.on(\"accountsChanged\", async accounts => {\n      this.provider.emit(\"accountsChanged\", accounts);\n    });\n    injectedProvider.on(\"chainChanged\", async chainId => {\n      const connectedHexChainId = isHexStrict(chainId) ? chainId : \"0x\".concat(parseInt(chainId, 10).toString(16)); // Check if chainId changed and trigger event\n\n      this.configure({\n        chainConfig: _objectSpread$1(_objectSpread$1({}, this.config.chainConfig), {}, {\n          chainId: connectedHexChainId\n        })\n      });\n      await this.setupProvider(injectedProvider);\n    });\n  }\n\n}\n\nfunction createChainIdMiddleware(chainId) {\n  return (req, res, next, end) => {\n    if (req.method === \"solana_chainId\") {\n      res.result = chainId;\n      return end();\n    }\n\n    return next();\n  };\n}\n\nfunction createProviderConfigMiddleware(providerConfig) {\n  return (req, res, next, end) => {\n    if (req.method === \"solana_provider_config\") {\n      res.result = providerConfig;\n      return end();\n    }\n\n    return next();\n  };\n}\n\nfunction createJsonRpcClient(providerConfig) {\n  const {\n    chainId,\n    rpcTarget\n  } = providerConfig;\n  const fetchMiddleware = createFetchMiddleware({\n    rpcTarget\n  });\n  const networkMiddleware = mergeMiddleware([createChainIdMiddleware(chainId), createProviderConfigMiddleware(providerConfig), fetchMiddleware]);\n  return {\n    networkMiddleware,\n    fetchMiddleware\n  };\n}\n\nasync function getProviderHandlers(_ref) {\n  let {\n    privKey,\n    getProviderEngineProxy\n  } = _ref;\n\n  const transactionGenerator = serializedTx => {\n    const decodedTx = bs58.decode(serializedTx);\n    const tx = Transaction.populate(Message.from(decodedTx));\n    return tx;\n  };\n\n  const keyPairGenerator = () => {\n    return Keypair.fromSecretKey(Buffer.from(privKey, \"hex\"));\n  };\n\n  if (typeof privKey !== \"string\") throw WalletInitializationError.invalidParams(\"privKey must be a string\");\n  const keyPair = keyPairGenerator();\n  const providerHandlers = {\n    requestAccounts: async () => {\n      return [keyPair.publicKey.toBase58()];\n    },\n    getAccounts: async () => [keyPair.publicKey.toBase58()],\n    getPrivateKey: async () => privKey,\n    signTransaction: async req => {\n      var _req$params, _req$params2;\n\n      if (!((_req$params = req.params) !== null && _req$params !== void 0 && _req$params.message)) {\n        throw ethErrors.rpc.invalidParams(\"message\");\n      }\n\n      const transaction = transactionGenerator((_req$params2 = req.params) === null || _req$params2 === void 0 ? void 0 : _req$params2.message);\n      transaction.partialSign(keyPair);\n      return transaction;\n    },\n    signMessage: async req => {\n      var _req$params3;\n\n      if (!((_req$params3 = req.params) !== null && _req$params3 !== void 0 && _req$params3.message)) {\n        throw ethErrors.rpc.invalidParams(\"message\");\n      }\n\n      const signedMsg = nacl.sign.detached(req.params.message, keyPair.secretKey);\n      return signedMsg;\n    },\n    signAndSendTransaction: async req => {\n      var _req$params4, _req$params5;\n\n      if (!((_req$params4 = req.params) !== null && _req$params4 !== void 0 && _req$params4.message)) {\n        throw ethErrors.rpc.invalidParams(\"message\");\n      }\n\n      const _providerEngineProxy = getProviderEngineProxy();\n\n      if (!_providerEngineProxy) throw ethErrors.provider.custom({\n        message: \"Provider is not initialized\",\n        code: 4902\n      });\n      const transaction = transactionGenerator((_req$params5 = req.params) === null || _req$params5 === void 0 ? void 0 : _req$params5.message);\n      transaction.sign(keyPair);\n      const sig = await _providerEngineProxy.request({\n        method: \"sendTransaction\",\n        params: [bs58.encode(transaction.serialize())]\n      });\n      return {\n        signature: sig\n      };\n    },\n    signAllTransactions: async req => {\n      var _req$params6, _req$params7;\n\n      if (!((_req$params6 = req.params) !== null && _req$params6 !== void 0 && _req$params6.message) || !((_req$params7 = req.params) !== null && _req$params7 !== void 0 && _req$params7.message.length)) {\n        throw ethErrors.rpc.invalidParams(\"message\");\n      }\n\n      const signedTransactions = [];\n\n      for (const tx of ((_req$params8 = req.params) === null || _req$params8 === void 0 ? void 0 : _req$params8.message) || []) {\n        var _req$params8;\n\n        const transaction = transactionGenerator(tx);\n        transaction.partialSign(keyPair);\n        signedTransactions.push(transaction);\n      }\n\n      return signedTransactions;\n    }\n  };\n  return providerHandlers;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nclass SolanaPrivateKeyProvider extends BaseProvider {\n  constructor(_ref) {\n    let {\n      config,\n      state\n    } = _ref;\n    super({\n      config: {\n        chainConfig: _objectSpread(_objectSpread({}, config.chainConfig), {}, {\n          chainNamespace: CHAIN_NAMESPACES.SOLANA\n        })\n      },\n      state\n    });\n  }\n\n  async enable() {\n    if (!this.state.privateKey) throw ethErrors.provider.custom({\n      message: \"Private key is not found in state, plz pass it in constructor state param\",\n      code: 4902\n    });\n    await this.setupProvider(this.state.privateKey);\n    return this._providerEngineProxy.request({\n      method: \"eth_accounts\"\n    });\n  }\n\n  async setupProvider(privKey) {\n    const providerHandlers = await getProviderHandlers({\n      privKey,\n      getProviderEngineProxy: this.getProviderEngineProxy.bind(this)\n    });\n    const solanaMiddleware = createSolanaMiddleware(providerHandlers);\n    const engine = new JRPCEngine();\n    const {\n      networkMiddleware\n    } = createJsonRpcClient(this.config.chainConfig);\n    engine.push(this.getChainSwitchMiddleware());\n    engine.push(this.getAccountMiddleware());\n    engine.push(solanaMiddleware);\n    engine.push(networkMiddleware);\n    const provider = providerFromEngine(engine);\n    this.updateProviderEngineProxy(provider);\n    await this.lookupNetwork();\n  }\n\n  async updateAccount(params) {\n    if (!this._providerEngineProxy) throw ethErrors.provider.custom({\n      message: \"Provider is not initialized\",\n      code: 4902\n    });\n    const existingKey = await this._providerEngineProxy.request({\n      method: \"solanaPrivateKey\"\n    });\n\n    if (existingKey !== params.privateKey) {\n      await this.setupProvider(params.privateKey);\n\n      this._providerEngineProxy.emit(\"accountsChanged\", {\n        accounts: await this._providerEngineProxy.request({\n          method: \"requestAccounts\"\n        })\n      });\n    }\n  }\n\n  async switchChain(params) {\n    if (!this._providerEngineProxy) throw ethErrors.provider.custom({\n      message: \"Provider is not initialized\",\n      code: 4902\n    });\n    const chainConfig = this.getChainConfig(params.chainId);\n    this.update({\n      chainId: \"loading\"\n    });\n    this.configure({\n      chainConfig\n    });\n    const privKey = await this._providerEngineProxy.request({\n      method: \"solanaPrivateKey\"\n    });\n    await this.setupProvider(privKey);\n  }\n\n  async lookupNetwork() {\n    if (!this._providerEngineProxy) throw ethErrors.provider.custom({\n      message: \"Provider is not initialized\",\n      code: 4902\n    });\n    const health = await this._providerEngineProxy.request({\n      method: \"getHealth\",\n      params: []\n    });\n    const {\n      chainConfig\n    } = this.config;\n    if (health !== \"ok\") throw WalletInitializationError.rpcConnectionError(\"Failed to lookup network for following rpc target: \".concat(chainConfig.rpcTarget));\n    this.update({\n      chainId: chainConfig.chainId\n    });\n\n    if (this.state.chainId !== chainConfig.chainId) {\n      this.provider.emit(\"chainChanged\", this.state.chainId);\n      this.provider.emit(\"connect\", {\n        chainId: this.state.chainId\n      });\n    }\n\n    return this.state.chainId;\n  }\n\n  getChainSwitchMiddleware() {\n    const chainSwitchHandlers = {\n      addNewChainConfig: async req => {\n        if (!req.params) throw ethErrors.rpc.invalidParams(\"Missing request params\");\n        const {\n          chainId,\n          chainName,\n          rpcUrls,\n          blockExplorerUrls,\n          nativeCurrency\n        } = req.params;\n        if (!chainId) throw ethErrors.rpc.invalidParams(\"Missing chainId in chainParams\");\n        if (!rpcUrls || rpcUrls.length === 0) throw ethErrors.rpc.invalidParams(\"Missing rpcUrls in chainParams\");\n        if (!nativeCurrency) throw ethErrors.rpc.invalidParams(\"Missing nativeCurrency in chainParams\");\n        this.addChain({\n          chainNamespace: CHAIN_NAMESPACES.SOLANA,\n          chainId,\n          ticker: (nativeCurrency === null || nativeCurrency === void 0 ? void 0 : nativeCurrency.symbol) || \"SOL\",\n          tickerName: (nativeCurrency === null || nativeCurrency === void 0 ? void 0 : nativeCurrency.name) || \"Solana\",\n          displayName: chainName,\n          rpcTarget: rpcUrls[0],\n          blockExplorer: (blockExplorerUrls === null || blockExplorerUrls === void 0 ? void 0 : blockExplorerUrls[0]) || \"\"\n        });\n      },\n      switchSolanaChain: async req => {\n        if (!req.params) throw ethErrors.rpc.invalidParams(\"Missing request params\");\n        if (!req.params.chainId) throw ethErrors.rpc.invalidParams(\"Missing chainId\");\n        await this.switchChain(req.params);\n      }\n    };\n    const chainSwitchMiddleware = createChainSwitchMiddleware(chainSwitchHandlers);\n    return chainSwitchMiddleware;\n  }\n\n  getAccountMiddleware() {\n    const accountHandlers = {\n      updatePrivatekey: async req => {\n        if (!req.params) throw ethErrors.rpc.invalidParams(\"Missing request params\");\n        if (!req.params.privateKey) throw ethErrors.rpc.invalidParams(\"Missing privateKey\");\n        const {\n          privateKey\n        } = req.params;\n        await this.updateAccount({\n          privateKey\n        });\n      }\n    };\n    return createAccountMiddleware(accountHandlers);\n  }\n\n}\n\n_defineProperty(SolanaPrivateKeyProvider, \"getProviderInstance\", async params => {\n  const providerFactory = new SolanaPrivateKeyProvider({\n    config: {\n      chainConfig: params.chainConfig\n    }\n  });\n  await providerFactory.setupProvider(params.privKey);\n  return providerFactory;\n});\n\nclass SolanaWallet {\n  constructor(provider) {\n    _defineProperty(this, \"provider\", void 0);\n\n    this.provider = provider;\n  }\n\n  async requestAccounts() {\n    const accounts = await this.provider.request({\n      method: \"requestAccounts\",\n      params: {}\n    });\n    return accounts;\n  }\n\n  async signAndSendTransaction(transaction) {\n    const {\n      signature\n    } = await this.provider.request({\n      method: \"signAndSendTransaction\",\n      params: {\n        message: bs58.encode(transaction.serialize({\n          requireAllSignatures: false\n        }))\n      }\n    });\n    return {\n      signature\n    };\n  }\n\n  async signTransaction(transaction) {\n    const signedTransaction = await this.provider.request({\n      method: \"signTransaction\",\n      params: {\n        message: bs58.encode(transaction.serialize({\n          requireAllSignatures: false\n        }))\n      }\n    });\n    return signedTransaction;\n  }\n\n  async signAllTransactions(transactions) {\n    const messages = transactions.map(transaction => {\n      return bs58.encode(transaction.serialize({\n        requireAllSignatures: false\n      }));\n    });\n    const signedTransaction = await this.provider.request({\n      method: \"signAllTransactions\",\n      params: {\n        message: messages\n      }\n    });\n    return signedTransaction;\n  }\n\n  async signMessage(data) {\n    const response = await this.provider.request({\n      method: \"signMessage\",\n      params: {\n        message: data\n      }\n    });\n    return response;\n  }\n\n  async request(args) {\n    const result = await this.provider.request(args);\n    return result;\n  }\n\n}\n\nexport { PhantomInjectedProvider, SolanaPrivateKeyProvider, SolanaWallet, TorusInjectedProvider };","map":{"version":3,"mappings":"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","names":["createGetAccountsMiddleware","getAccounts","createAsyncMiddleware","request","response","next","method","Error","accounts","result","undefined","createRequestAccountsMiddleware","requestAccounts","createGenericJRPCMiddleware","targetMethod","handler","createSolanaMiddleware","providerHandlers","signTransaction","signAndSendTransaction","signAllTransactions","signMessage","getPrivateKey","mergeMiddleware","createChainSwitchMiddleware","addNewChainConfig","switchSolanaChain","createAccountMiddleware","updatePrivatekey","createInjectedProviderProxyMiddleware","provider","req","res","_next","getPhantomHandlers","injectedProvider","publicKey","bs58","encode","toBytes","ethErrors","rpc","methodNotSupported","message","decode","params","txn","Transaction","from","transaction","_req$params","txRes","signature","_req$params2","_req$params3","length","invalidParams","txns","map","msg","decodedMsg","PhantomInjectedProvider","BaseProvider","constructor","config","state","chainConfig","chainNamespace","CHAIN_NAMESPACES","SOLANA","switchChain","_","Promise","resolve","setupProvider","solanaMiddleware","injectedProviderProxy","engine","JRPCEngine","push","providerFromEngine","updateProviderEngineProxy","lookupNetwork","update","chainId","getTorusHandlers","data","toString","buf","Buffer","sendTx","_req$params4","_req$params5","messages","TorusInjectedProvider","handleInjectedProviderUpdate","setupEngine","custom","code","connectedChainId","connectedHexChainId","isHexStrict","parseInt","WalletInitializationError","rpcConnectionError","emit","on","configure","createChainIdMiddleware","end","createProviderConfigMiddleware","providerConfig","createJsonRpcClient","rpcTarget","fetchMiddleware","createFetchMiddleware","networkMiddleware","getProviderHandlers","privKey","getProviderEngineProxy","transactionGenerator","serializedTx","decodedTx","tx","populate","Message","keyPairGenerator","Keypair","fromSecretKey","keyPair","toBase58","partialSign","signedMsg","nacl","sign","detached","secretKey","_providerEngineProxy","sig","serialize","_req$params6","_req$params7","signedTransactions","SolanaPrivateKeyProvider","enable","privateKey","bind","getChainSwitchMiddleware","getAccountMiddleware","updateAccount","existingKey","getChainConfig","health","chainSwitchHandlers","chainName","rpcUrls","blockExplorerUrls","nativeCurrency","addChain","ticker","symbol","tickerName","name","displayName","blockExplorer","chainSwitchMiddleware","accountHandlers","providerFactory","SolanaWallet","requireAllSignatures","signedTransaction","transactions","args"],"sources":["../src/rpc/solanaRpcMiddlewares.ts","../src/providers/injectedProviders/injectedProviderProxy.ts","../src/providers/injectedProviders/phantom/providerHandlers.ts","../src/providers/injectedProviders/phantom/phantomInjectedProvider.ts","../src/providers/injectedProviders/torus/providerHandlers.ts","../src/providers/injectedProviders/torus/torusInjectedProvider.ts","../src/rpc/JrpcClient.ts","../src/providers/privateKeyProvider/solanaPrivateKeyUtils.ts","../src/providers/privateKeyProvider/solanaPrivateKeyProvider.ts","../src/solanaWallet.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null]},"metadata":{},"sourceType":"module"}